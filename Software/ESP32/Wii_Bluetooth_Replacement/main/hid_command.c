#include <inttypes.h>
#include <stdio.h>
#include "btstack.h"
#include "hid_command.h"
#include "hid_controller.h"

const hid_command_t cmd_joycon_report_mode_full = {
	REPORT_MODE_FULL, 0, NULL, 13, 0, 0,
	{ 0xA2, 0x01, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x03, 0x30 }
};

const hid_command_t cmd_joycon_report_mode_standard = {
	REPORT_MODE_STANDARD, 0, NULL, 13, 0, 0,
	{ 0xA2, 0x01, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x03, 0x3F }
};

const hid_command_t cmd_joycon_enable_imu = {
	ENABLE_IMU, 0, NULL, 13, 0, 0,
	{ 0xA2, 0x01, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x40, 0x01 }
};

const hid_command_t cmd_joycon_get_device_info = {
	GET_DEVICE_INFO, 0, NULL, 12, 0, 0,
	{ 0xA2, 0x01, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x02 }
};

const hid_command_t cmd_joycon_read_cal_imu_factory = {
	READ_CAL_IMU_FACTORY, 0, NULL, 17, 0, 0,
	{ 0xA2, 0x01, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x10, 0x20, 0x60, 0x00, 0x00, 0x18 }
};

const hid_command_t cmd_joycon_read_cal_joy_l_factory = {
	READ_CAL_JOY_L_FACTORY, 0, NULL, 17, 0, 0,
	{ 0xA2, 0x01, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x10, 0x3D, 0x60, 0x00, 0x00, 0x09 }
};

const hid_command_t cmd_joycon_read_cal_joy_r_factory = {
	READ_CAL_JOY_R_FACTORY, 0, NULL, 17, 0, 0,
	{ 0xA2, 0x01, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x10, 0x46, 0x60, 0x00, 0x00, 0x09 }
};

const hid_command_t cmd_joycon_read_cal_imu_user = {
	READ_CAL_IMU_USER, 0, NULL, 17, 0, 0,
	{ 0xA2, 0x01, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x10, 0x26, 0x80, 0x00, 0x00, 0x1A }
};

const hid_command_t cmd_joycon_read_cal_joy_l_user = {
	READ_CAL_JOY_L_USER, 0, NULL, 17, 0, 0,
	{ 0xA2, 0x01, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x10, 0x10, 0x80, 0x00, 0x00, 0x0B }
};

const hid_command_t cmd_joycon_read_cal_joy_r_user = {
	READ_CAL_JOY_R_USER, 0, NULL, 17, 0, 0,
	{ 0xA2, 0x01, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x10, 0x1B, 0x80, 0x00, 0x00, 0x0B }
};

const hid_command_t cmd_joycon_write_cal_accel_user = {
	WRITE_CAL_IMU_USER, 0, NULL, 29, 6, 17,
	{ 0xA2, 0x01, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x11, 0x28, 0x80, 0x00, 0x00, 0x0C,
	  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x40, 0x00, 0x40, 0x00, 0x40 }
};

const hid_command_t cmd_joycon_write_cal_gyro_user = {
	WRITE_CAL_IMU_USER, 0, NULL, 29, 6, 17,
	{ 0xA2, 0x01, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x11, 0x34, 0x80, 0x00, 0x00, 0x0C,
	  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x3B, 0x34, 0x3B, 0x34, 0x3B, 0x34 }
};

const hid_command_t cmd_joycon_write_magic_imu_user = {
	WRITE_CAL_IMU_USER, 0, NULL, 19, 0, 0,
	{ 0xA2, 0x01, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x11, 0x26, 0x80, 0x00, 0x00, 0x02, 0xB2, 0xA1 }
};

const hid_command_t cmd_joycon_write_cal_joy_l_user = {
	WRITE_CAL_JOY_L_USER, 0, NULL, 17, 0, 0,
	{ 0xA2, 0x01, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x11, 0x10, 0x80, 0x00, 0x00, 0x0B }
};

const hid_command_t cmd_joycon_write_cal_joy_r_user = {
	WRITE_CAL_JOY_R_USER, 0, NULL, 17, 0, 0,
	{ 0xA2, 0x01, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x11, 0x1B, 0x80, 0x00, 0x00, 0x0B }
};

const hid_command_t cmd_joycon_reset_pair_info = {
	RESET_PAIR_INFO, 0, NULL, 12, 0, 0,
	{ 0xA2, 0x01, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x07 }
};

const hid_command_t cmd_joycon_pair_begin = {
	PAIR_BEGIN, 0, NULL, 13, 6, 13,
	{ 0xA2, 0x01, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x01, 0x01 }
};

const hid_command_t cmd_joycon_pair_get_key = {	
	PAIR_GET_KEY, 0, NULL, 13, 0, 0,
	{ 0xA2, 0x01, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x01, 0x02 }
};

const hid_command_t cmd_joycon_pair_save_key = {
	PAIR_SAVE_KEY,  0, NULL, 13, 0, 0,
	{ 0xA2, 0x01, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x01, 0x03 }
};

const hid_command_t cmd_joycon_set_player_leds = {
	SET_PLAYER_LEDS, 0, NULL, 13, 1, 12,	// Arg = LED state
	{ 0xA2, 0x01, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x30, 0x00 }
};

const hid_command_t cmd_joycon_enable_rumble = {
	ENABLE_RUMBLE, 0, NULL, 13, 0, 0,
	{ 0xA2, 0x01, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x48, 0x01 }
};

const hid_command_t cmd_joycon_rumble = {
	RUMBLE, 0, NULL, 11, 0, 0,
	{ 0xA2, 0x10, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00 }
};

// - - - - - - - - - - - - - - - - - - - - - - //

const hid_command_t cmd_wiimote_get_status = {
	GET_STATUS, 0, NULL, 3, 0, 0,
	{ 0xA2, 0x15, 0x00 }
};

const hid_command_t cmd_wiimote_rumble = {
	RUMBLE, 0, NULL, 3, 0, 0,
	{ 0xA2, 0x10, 0x00 }
};

const hid_command_t cmd_wiimote_report_mode_buttons = {
	REPORT_MODE_BUTTONS, 0, NULL, 4, 0, 0,
	{ 0xA2, 0x12, 0x02, 0x30 }
};

const hid_command_t cmd_wiimote_report_mode_acc = {
	REPORT_MODE_ACC, 0, NULL, 4, 0, 0,
	{ 0xA2, 0x12, 0x02, 0x31 }
};

const hid_command_t cmd_wiimote_report_mode_ext8 = {
	REPORT_MODE_EXT8, 0, NULL, 4, 0, 0,
	{ 0xA2, 0x12, 0x02, 0x32 }
};

const hid_command_t cmd_wiimote_report_mode_acc_ir12 = {
	REPORT_MODE_ACC_IR12, 0, NULL, 4, 0, 0,
	{ 0xA2, 0x12, 0x02, 0x33 }
};

const hid_command_t cmd_wiimote_report_mode_ext19 = {
	REPORT_MODE_EXT19, 0, NULL, 4, 0, 0,
	{ 0xA2, 0x12, 0x02, 0x34 }
};

const hid_command_t cmd_wiimote_report_mode_acc_ext16 = {
	REPORT_MODE_ACC_EXT16, 0, NULL, 4, 0, 0,
	{ 0xA2, 0x12, 0x02, 0x35 }
};

const hid_command_t cmd_wiimote_report_mode_ir10_ext9 = {
	REPORT_MODE_IR10_EXT9, 0, NULL, 4, 0, 0,
	{ 0xA2, 0x12, 0x02, 0x36 }
};

const hid_command_t cmd_wiimote_report_mode_acc_ir10_ext6 = {
	REPORT_MODE_ACC_IR10_EXT6, 0, NULL, 4, 0, 0,
	{ 0xA2, 0x12, 0x02, 0x37 }
};

const hid_command_t cmd_wiimote_report_mode_ext21 = {
	REPORT_MODE_EXT21, 0, NULL, 4, 0, 0,
	{ 0xA2, 0x12, 0x02, 0x3D }
};

const hid_command_t cmd_wiimote_set_player_leds = {
	SET_PLAYER_LEDS, 0, NULL, 3, 1, 2,	// Arg = LED state
	{ 0xA2, 0x11, 0x00 }
};

const hid_command_t cmd_wiimote_read_extension_id = {
	READ_EXTENSION_ID, 0, NULL, 8, 0, 0,
	{ 0xA2, 0x17, 0x04, 0xA4, 0x00, 0xFA, 0x00, 0x06 }
};

const hid_command_t cmd_wiimote_read_wmp_id = {
	READ_WMP_ID, 0, NULL, 8, 0, 0,
	{ 0xA2, 0x17, 0x04, 0xA6, 0x00, 0xFA, 0x00, 0x06 }
};

const hid_command_t cmd_wiimote_setup_extension_1 = {
	SETUP_EXTENSION_1, 0, NULL, 23, 0, 0,	// Also doubles as "deactive WMP" command
	{ 0xA2, 0x16, 0x04, 0xA4, 0x00, 0xF0, 0x01, 0x55, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00 }
};

const hid_command_t cmd_wiimote_setup_extension_2 = {
	SETUP_EXTENSION_2, 0, NULL, 23, 0, 0,
	{ 0xA2, 0x16, 0x04, 0xA4, 0x00, 0xFB, 0x01, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00 }
};

const hid_command_t cmd_wiimote_setup_wmp = {
	SETUP_WMP, 0, NULL, 23, 0, 0,
	{ 0xA2, 0x16, 0x04, 0xA6, 0x00, 0xF0, 0x01, 0x55, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00 }
};

const hid_command_t cmd_wiimote_activate_wmp = {
	ACTIVATE_WMP, 0, NULL, 23, 0, 0,
	{ 0xA2, 0x16, 0x04, 0xA6, 0x00, 0xFE, 0x01, 0x04, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00 }
};

const hid_command_t cmd_wiimote_activate_wmp_passthrough_nunchuk = {
	SETUP_WMP_PASSTHROUGH_NUNCHUK, 0, NULL, 23, 0, 0,
	{ 0xA2, 0x16, 0x04, 0xA6, 0x00, 0xFE, 0x01, 0x05, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00 }
};

const hid_command_t cmd_wiimote_activate_wmp_passthrough_classic = {
	SETUP_WMP_PASSTHROUGH_CLASSIC, 0, NULL, 23, 0, 0,
	{ 0xA2, 0x16, 0x04, 0xA6, 0x00, 0xFE, 0x01, 0x07, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00 }
};

const hid_command_t cmd_wiimote_read_cal_extension = {
	READ_CAL_EXTENSION, 0, NULL, 8, 0, 0,
	{ 0xA2, 0x17, 0x04, 0xA4, 0x00, 0x20, 0x00, 0x10 }
};

const hid_command_t cmd_wiimote_read_cal_wmp = {
	READ_CAL_WMP, 0, NULL, 8, 0, 0,
	{ 0xA2, 0x17, 0x04, 0xA6, 0x00, 0x20, 0x00, 0x10 }
};

const hid_command_t cmd_wiimote_read_cal_accel = {
	READ_CAL_ACCEL, 0, NULL, 8, 0, 0,
	{ 0xA2, 0x17, 0x00, 0x00, 0x00, 0x16, 0x00, 0x04 }
};

const hid_command_t cmd_wiimote_write_cal_extension = {
	WRITE_CAL_EXTENSION, 0, NULL, 23, 16, 7,
	{ 0xA2, 0x16, 0x04, 0xA4, 0x00, 0x20, 0x10, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00 }
};

const hid_command_t cmd_wiimote_write_cal_wmp = {
	WRITE_CAL_WMP, 0, NULL, 23, 6, 7,
	{ 0xA2, 0x16, 0x04, 0xA4, 0x00, 0x20, 0x06, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00 }
};

const hid_command_t cmd_wiimote_write_cal_accel = {
	WRITE_CAL_ACCEL, 0, NULL, 23, 4, 7,
	{ 0xA2, 0x16, 0x00, 0x00, 0x00, 0x16, 0x04, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00 }
};